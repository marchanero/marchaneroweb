---
// Componente para mostrar publicaciones recientes en la p치gina de inicio
import type { Publication } from '../types/Scholar';

interface Props {
  publications: Publication[];
  limit?: number;
  showTitle?: boolean;
  title?: string;
}

const { 
  publications, 
  limit = 3, 
  showTitle = true,
  title = "Publicaciones Recientes"
} = Astro.props;

const limitedPublications = publications.slice(0, limit);

// Funci칩n para obtener icono seg칰n tipo de publicaci칩n
function getPublicationIcon(type: string) {
  switch (type) {
    case 'journal':
      return '游늯';
    case 'conference':
      return '游꿗';
    case 'book':
      return '游닄';
    case 'thesis':
      return '游꿉';
    default:
      return '游늯';
  }
}
---

<section class="py-10">
  {showTitle && (
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white">{title}</h2>
      <a href="/publicaciones" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium flex items-center">
        Ver todas
        <svg class="w-5 h-5 ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14"></path>
          <path d="M12 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
  )}
  
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {limitedPublications.map((publication) => (
      <article class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 border-t-4 border-blue-600 dark:border-blue-500 h-full flex flex-col">
        <div class="mb-2">
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300">
            {getPublicationIcon(publication.type)} {publication.year}
          </span>
        </div>
        
        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-3">
          {publication.link ? (
            <a href={publication.link} target="_blank" rel="noopener noreferrer" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
              {publication.title}
            </a>
          ) : (
            publication.title
          )}
        </h3>
        
        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4 flex-grow">
          {publication.authors.length > 3 
            ? `${publication.authors[0]}, et al.` 
            : publication.authors.join(', ')}
        </p>
        
        <div class="mt-auto">
          <p class="text-xs text-gray-500 dark:text-gray-500 italic mb-3">{publication.publication}</p>
          
          <div class="flex justify-between items-center">
            {publication.citedBy > 0 && (
              <span class="text-sm text-gray-600 dark:text-gray-400">
                {publication.citedBy} {publication.citedBy === 1 ? 'cita' : 'citas'}
              </span>
            )}
            
            {publication.link && (
              <a 
                href={publication.link} 
                target="_blank" 
                rel="noopener noreferrer"
                class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"
              >
                Leer m치s
              </a>
            )}
          </div>
        </div>
      </article>
    ))}
  </div>
  
  {publications.length === 0 && (
    <div class="text-center py-10">
      <p class="text-gray-600 dark:text-gray-400">No hay publicaciones disponibles.</p>
    </div>
  )}
</section>
