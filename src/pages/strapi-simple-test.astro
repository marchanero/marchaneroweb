 ---
// P√°gina de prueba simple para Strapi Cloud
const STRAPI_URL = 'https://creative-happiness-dc6aff0a15.strapiapp.com';
const STRAPI_TOKEN = '3b9de32bc6bd6e6116e175729a37851e4dff8cdcea4239dcc3cca1f0e33132a4e20cdb4c655968c5d29894d45656f8ddbb412f5b4f87c8225d33925a9e965b4baaf0a5538ed03a46e6918791877b38442719e5bc34a66a08c8aacd2012a3c63e68b2bf2225b24eeb3c556d774d8f3ca0e35b3f6cbffc1223e2db4e6f6d256d60';

// Funci√≥n simple para hacer fetch
async function testStrapiAPI() {
  try {
    // Test de conexi√≥n b√°sica
    const testUrl = `${STRAPI_URL}/api/users-permissions/users-permissions`;
    console.log('Testing URL:', testUrl);
    
    const response = await fetch(testUrl, {
      headers: {
        'Authorization': `Bearer ${STRAPI_TOKEN}`,
        'Content-Type': 'application/json',
      },
    });

    console.log('Response status:', response.status);
    console.log('Response headers:', [...response.headers.entries()]);

    const data = await response.json();
    console.log('Response data:', data);

    return { success: true, status: response.status, data };
  } catch (error) {
    console.error('Error:', error);
    return { success: false, error: error.message };
  }
}

const testResult = await testStrapiAPI();
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Simple Strapi</title>
  </head>
  <body style="font-family: system-ui; max-width: 1200px; margin: 0 auto; padding: 2rem;">
    <header>
      <h1>üß™ Test Simple Strapi Cloud</h1>
      <p>Prueba b√°sica de conexi√≥n con la API de Strapi Cloud</p>
    </header>

    <main>
      <section style="background: #f5f5f5; padding: 2rem; border-radius: 8px; margin: 2rem 0;">
        <h2>üîß Configuraci√≥n</h2>
        <p><strong>URL de Strapi:</strong> {STRAPI_URL}</p>
        <p><strong>Token presente:</strong> {STRAPI_TOKEN ? `S√≠ (${STRAPI_TOKEN.substring(0, 20)}...)` : 'No'}</p>
      </section>

      <section style="background: #f0f8ff; padding: 2rem; border-radius: 8px; margin: 2rem 0;">
        <h2>üöÄ Resultado del Test</h2>
        
        {testResult.success ? (
          <div style="color: green;">
            <h3>‚úÖ Conexi√≥n exitosa!</h3>
            <p><strong>Status:</strong> {testResult.status}</p>
            <details>
              <summary>Ver respuesta completa</summary>
              <pre style="background: #fff; padding: 1rem; border-radius: 4px; overflow: auto;">
{JSON.stringify(testResult.data, null, 2)}
              </pre>
            </details>
          </div>
        ) : (
          <div style="color: red;">
            <h3>‚ùå Error en la conexi√≥n</h3>
            <p><strong>Error:</strong> {testResult.error}</p>
          </div>
        )}
      </section>

      <section style="background: #fff5f5; padding: 2rem; border-radius: 8px; margin: 2rem 0;">
        <h2>üìã Pr√≥ximos pasos</h2>
        <p>Si la conexi√≥n es exitosa, necesitamos crear los Content Types en Strapi Cloud:</p>
        <ol>
          <li>Ve a <a href="https://creative-happiness-dc6aff0a15.strapiapp.com/admin" target="_blank" rel="noopener">tu dashboard de Strapi Cloud</a></li>
          <li>Ve a "Content-Types Builder"</li>
          <li>Crea los siguientes Collection Types:
            <ul>
              <li><strong>article</strong> - para art√≠culos/publicaciones</li>
              <li><strong>project</strong> - para proyectos</li>
            </ul>
          </li>
          <li>Crea el siguiente Single Type:
            <ul>
              <li><strong>site-info</strong> - para informaci√≥n general del sitio</li>
            </ul>
          </li>
        </ol>
      </section>
    </main>
  </body>
</html>
