---
import Layout from '../layouts/Layout.astro';

// Datos de proyectos mejorados
const proyectos = [
  {
    id: 'ia-educacion',
    titulo: 'Inteligencia Artificial Aplicada a la Educaci√≥n',
    imagen: 'https://images.unsplash.com/photo-1485827404703-89b55fcc595e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400',
    altImagen: 'Investigaci√≥n sobre Inteligencia Artificial en Educaci√≥n',
    etiquetas: ['Machine Learning', 'Educational Tech', 'Data Analysis'],
    descripcion: 'Investigaci√≥n sobre sistemas de tutor√≠a inteligente que adaptan el contenido educativo a las necesidades individuales de los estudiantes, utilizando algoritmos de machine learning para personalizar la experiencia de aprendizaje.',
    descripcionCompleta: 'Este proyecto se centra en el desarrollo de sistemas adaptativos que pueden identificar patrones de aprendizaje, predecir dificultades acad√©micas y proporcionar retroalimentaci√≥n personalizada en tiempo real.',
    fechaInicio: '2022',
    fechaFin: 'Actualidad',
    estado: 'En curso',
    financiacion: 'Ministerio de Ciencia e Innovaci√≥n',
    presupuesto: '150,000‚Ç¨',
    url: '/proyectos/ia-educacion',
    github: '#',
    pdf: '#',
    destacado: true,
    progreso: 75,
    resultados: [
      'Desarrollo de algoritmo adaptativo de personalizaci√≥n',
      'Implementaci√≥n de sistema de an√°lisis de sentimientos',
      '3 publicaciones en revistas Q1'
    ]
  },
  {
    id: 'sistemas-distribuidos',
    titulo: 'Arquitecturas Eficientes para Sistemas Distribuidos',
    imagen: 'https://images.unsplash.com/photo-1558494949-ef010cbdcc31?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400',
    altImagen: 'Sistemas Distribuidos Energ√©ticamente Eficientes',
    etiquetas: ['Distributed Systems', 'Energy Efficiency', 'Cloud Computing'],
    descripcion: 'Desarrollo de nuevas arquitecturas para sistemas distribuidos con mayor eficiencia energ√©tica y rendimiento optimizado para cargas de trabajo modernas.',
    descripcionCompleta: 'El proyecto aborda los desaf√≠os de escalabilidad y eficiencia energ√©tica en sistemas distribuidos masivos, proponiendo nuevas arquitecturas que reducen el consumo energ√©tico hasta en un 30%.',
    fechaInicio: '2020',
    fechaFin: '2023',
    estado: 'Finalizado',
    financiacion: 'Junta de Comunidades de Castilla-La Mancha',
    presupuesto: '80,000‚Ç¨',
    url: '/proyectos/sistemas-distribuidos',
    github: '#',
    pdf: '#',
    destacado: false,
    progreso: 100,
    resultados: [
      'Reducci√≥n del 30% en consumo energ√©tico',
      'Prototipo desplegado en 3 centros de datos',
      '2 publicaciones en revistas JCR'
    ]
  },
  {
    id: 'blockchain-seguridad',
    titulo: 'Blockchain para Sistemas de Seguridad',
    imagen: 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400',
    altImagen: 'Investigaci√≥n sobre Blockchain y Seguridad',
    etiquetas: ['Blockchain', 'Cybersecurity', 'Cryptography'],
    descripcion: 'Investigaci√≥n sobre la aplicaci√≥n de tecnolog√≠as blockchain para mejorar la seguridad en sistemas distribuidos y proteger la integridad de los datos.',
    descripcionCompleta: 'Este proyecto explora nuevos protocolos de consenso y mecanismos criptogr√°ficos para crear sistemas blockchain m√°s seguros y eficientes.',
    fechaInicio: '2023',
    fechaFin: 'Actualidad',
    estado: 'En curso',
    financiacion: 'Proyecto Regional I+D+i',
    presupuesto: '65,000‚Ç¨',
    url: '/proyectos/blockchain-seguridad',
    github: '#',
    pdf: '#',
    destacado: false,
    progreso: 45,
    resultados: [
      'Protocolo de consenso mejorado',
      'An√°lisis de vulnerabilidades publicado'
    ]
  }
];

// Ordenar proyectos: primero los destacados, luego por fecha de inicio (m√°s recientes primero)
const proyectosOrdenados = [...proyectos].sort((a, b) => {
  if (a.destacado !== b.destacado) {
    return b.destacado ? 1 : -1;
  }
  return parseInt(b.fechaInicio) - parseInt(a.fechaInicio);
});

// Estad√≠sticas generales
const totalProyectos = proyectos.length;
const proyectosActivos = proyectos.filter(p => p.estado === 'En curso').length;
const proyectosFinalizados = proyectos.filter(p => p.estado === 'Finalizado').length;
const presupuestoTotal = proyectos.reduce((sum, p) => {
  const presupuesto = parseInt(p.presupuesto.replace(/[‚Ç¨,]/g, ''));
  return sum + presupuesto;
}, 0);
---

<style>
	/* Animaciones y efectos personalizados */
	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
	
	@keyframes fadeInLeft {
		from {
			opacity: 0;
			transform: translateX(-30px);
		}
		to {
			opacity: 1;
			transform: translateX(0);
		}
	}
	
	@keyframes fadeInRight {
		from {
			opacity: 0;
			transform: translateX(30px);
		}
		to {
			opacity: 1;
			transform: translateX(0);
		}
	}
	
	@keyframes shimmer {
		0% {
			background-position: -200px 0;
		}
		100% {
			background-position: calc(200px + 100%) 0;
		}
	}
	
	@keyframes float {
		0%, 100% {
			transform: translateY(0px);
		}
		50% {
			transform: translateY(-10px);
		}
	}
	
	@keyframes progressBar {
		from {
			width: 0%;
		}
		to {
			width: var(--progress-width);
		}
	}
	
	/* Clases de utilidad para animaciones */
	.animate-fade-in-up {
		animation: fadeInUp 0.6s ease-out forwards;
	}
	
	.animate-fade-in-left {
		animation: fadeInLeft 0.6s ease-out forwards;
	}
	
	.animate-fade-in-right {
		animation: fadeInRight 0.6s ease-out forwards;
	}
	
	.animate-delay-100 {
		animation-delay: 0.1s;
	}
	
	.animate-delay-200 {
		animation-delay: 0.2s;
	}
	
	.animate-delay-300 {
		animation-delay: 0.3s;
	}
	
	.animate-delay-400 {
		animation-delay: 0.4s;
	}
	
	/* Efectos especiales */
	.hero-gradient {
		background: linear-gradient(135deg, 
			rgba(59, 130, 246, 0.1) 0%, 
			rgba(147, 51, 234, 0.1) 50%, 
			rgba(236, 72, 153, 0.1) 100%);
	}
	
	.card-hover {
		transition: all 0.3s ease;
		position: relative;
		overflow: hidden;
	}
	
	.card-hover::before {
		content: '';
		position: absolute;
		top: 0;
		left: -100%;
		width: 100%;
		height: 100%;
		background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
		transition: left 0.5s ease;
	}
	
	.card-hover:hover::before {
		left: 100%;
	}
	
	.card-hover:hover {
		transform: translateY(-8px);
		box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
	}
	
	.btn-enhanced {
		background: linear-gradient(135deg, #3b82f6, #8b5cf6);
		background-size: 200% 200%;
		animation: shimmer 2s infinite;
		transition: all 0.3s ease;
		position: relative;
		overflow: hidden;
	}
	
	.btn-enhanced:hover {
		background-position: right center;
		transform: translateY(-2px);
		box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
	}
	
	.project-badge {
		animation: float 3s ease-in-out infinite;
	}
	
	.stats-card {
		background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
		backdrop-filter: blur(10px);
		border: 1px solid rgba(255,255,255,0.2);
		transition: all 0.3s ease;
	}
	
	.stats-card:hover {
		transform: scale(1.05);
		background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.1));
	}
	
	.progress-bar {
		animation: progressBar 2s ease-out forwards;
		animation-delay: 0.5s;
	}
	
	.project-image-overlay {
		background: linear-gradient(45deg, rgba(59, 130, 246, 0.8), rgba(147, 51, 234, 0.8));
		opacity: 0;
		transition: opacity 0.3s ease;
	}
	
	.card-hover:hover .project-image-overlay {
		opacity: 1;
	}
	
	/* Efectos de part√≠culas */
	.floating-particles::before {
		content: '';
		position: absolute;
		top: 20%;
		left: 10%;
		width: 4px;
		height: 4px;
		background: linear-gradient(45deg, #3b82f6, #8b5cf6);
		border-radius: 50%;
		animation: float 6s ease-in-out infinite;
	}
	
	.floating-particles::after {
		content: '';
		position: absolute;
		top: 60%;
		right: 15%;
		width: 6px;
		height: 6px;
		background: linear-gradient(45deg, #ec4899, #f59e0b);
		border-radius: 50%;
		animation: float 8s ease-in-out infinite reverse;
	}
	
	/* Accesibilidad */
	@media (prefers-reduced-motion: reduce) {
		* {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}
</style>

<Layout title="Proyectos de Investigaci√≥n - Dr. Roberto S√°nchez Reolid">
	<main class="min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300">
		<!-- Header mejorado -->
		<header class="relative bg-gradient-to-br from-purple-600 via-blue-700 to-indigo-800 dark:from-purple-800 dark:via-blue-900 dark:to-indigo-900 text-white py-20 overflow-hidden hero-gradient floating-particles">
			<!-- Fondo animado -->
			<div class="absolute inset-0 bg-gradient-to-br from-purple-50/10 via-blue-50/10 to-indigo-50/10"></div>
			
			<div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
				<div class="animate-fade-in-up">
					<h1 class="text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white via-purple-100 to-blue-100 bg-clip-text text-transparent">
						üöÄ Proyectos de Investigaci√≥n
					</h1>
					<p class="text-xl md:text-2xl text-purple-100 dark:text-purple-200 max-w-3xl leading-relaxed mb-6">
						Desarrollando tecnolog√≠as innovadoras para resolver los desaf√≠os del futuro en 
						<span class="font-semibold text-white">IA</span> y 
						<span class="font-semibold text-white">Sistemas Distribuidos</span>
					</p>
					
					<!-- Estad√≠sticas del portafolio -->
					<div class="animate-fade-in-up animate-delay-200 grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mt-8">
						<div class="stats-card rounded-2xl p-4 text-center">
							<div class="text-2xl font-bold text-white">{totalProyectos}</div>
							<div class="text-sm text-purple-200">Total Proyectos</div>
						</div>
						<div class="stats-card rounded-2xl p-4 text-center">
							<div class="text-2xl font-bold text-white">{proyectosActivos}</div>
							<div class="text-sm text-purple-200">En Curso</div>
						</div>
						<div class="stats-card rounded-2xl p-4 text-center">
							<div class="text-2xl font-bold text-white">{proyectosFinalizados}</div>
							<div class="text-sm text-purple-200">Finalizados</div>
						</div>
						<div class="stats-card rounded-2xl p-4 text-center">
							<div class="text-2xl font-bold text-white">{(presupuestoTotal / 1000).toFixed(0)}k‚Ç¨</div>
							<div class="text-sm text-purple-200">Financiaci√≥n</div>
						</div>
					</div>
				</div>
			</div>
		</header>

		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
			
			<!-- Proyectos destacados -->
			<section class="mb-16">
				<div class="animate-fade-in-up">
					<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center space-x-3">
						<span>‚≠ê</span>
						<span>Proyectos Destacados</span>
					</h2>
					<p class="text-gray-600 dark:text-gray-400 mb-8">Investigaciones principales con mayor impacto e innovaci√≥n</p>
				</div>
				
				<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
					{proyectosOrdenados.filter(p => p.destacado).map((proyecto, index) => (
						<article class={`card-hover bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in-up`} style={`animation-delay: ${index * 0.2}s`}>
							<!-- Imagen del proyecto -->
							<div class="relative h-48 overflow-hidden">
								<img 
									src={proyecto.imagen} 
									alt={proyecto.altImagen}
									class="w-full h-full object-cover transition-transform duration-500 hover:scale-110"
								/>
								<div class="project-image-overlay absolute inset-0 flex items-center justify-center">
									<div class="text-white text-center">
										<div class="text-3xl mb-2">üîç</div>
										<p class="font-semibold">Ver detalles</p>
									</div>
								</div>
								{proyecto.estado === 'En curso' && (
									<div class="absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium project-badge">
										üü¢ En curso
									</div>
								)}
								{proyecto.estado === 'Finalizado' && (
									<div class="absolute top-4 right-4 bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium">
										‚úÖ Finalizado
									</div>
								)}
							</div>
							
							<!-- Contenido del proyecto -->
							<div class="p-6">
								<div class="flex flex-wrap gap-2 mb-4">
									{proyecto.etiquetas.map(etiqueta => (
										<span class="bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900 dark:to-purple-900 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full text-sm font-medium">
											{etiqueta}
										</span>
									))}
								</div>
								
								<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">
									{proyecto.titulo}
								</h3>
								
								<p class="text-gray-700 dark:text-gray-300 mb-4 leading-relaxed">
									{proyecto.descripcion}
								</p>
								
								<!-- Progreso -->
								<div class="mb-4">
									<div class="flex justify-between items-center mb-2">
										<span class="text-sm font-medium text-gray-700 dark:text-gray-300">Progreso</span>
										<span class="text-sm font-bold text-blue-600 dark:text-blue-400">{proyecto.progreso}%</span>
									</div>
									<div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
										<div 
											class="bg-gradient-to-r from-blue-500 to-purple-600 h-2.5 rounded-full progress-bar"
											style={`--progress-width: ${proyecto.progreso}%`}
										></div>
									</div>
								</div>
								
								<!-- Informaci√≥n adicional -->
								<div class="space-y-2 mb-6 text-sm">
									<div class="flex justify-between">
										<span class="text-gray-600 dark:text-gray-400">Per√≠odo:</span>
										<span class="font-medium text-gray-900 dark:text-white">{proyecto.fechaInicio} - {proyecto.fechaFin}</span>
									</div>
									<div class="flex justify-between">
										<span class="text-gray-600 dark:text-gray-400">Financiaci√≥n:</span>
										<span class="font-medium text-gray-900 dark:text-white">{proyecto.presupuesto}</span>
									</div>
								</div>
								
								<!-- Botones de acci√≥n -->
								<div class="flex flex-wrap gap-3">
									<a 
										href={proyecto.url} 
										class="btn-enhanced flex-1 text-center py-2 px-4 text-white font-medium rounded-lg transition-all duration-200"
									>
										Ver detalles completos
									</a>
									{proyecto.github && (
										<a 
											href={proyecto.github} 
											target="_blank" 
											rel="noopener noreferrer"
											class="bg-gray-800 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors duration-200 flex items-center space-x-2"
										>
											<span>üíª</span>
											<span>C√≥digo</span>
										</a>
									)}
								</div>
							</div>
						</article>
					))}
				</div>
			</section>

			<!-- Todos los proyectos -->
			<section class="animate-fade-in-up animate-delay-300">
				<h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8 flex items-center space-x-3">
					<span>üìã</span>
					<span>Portafolio Completo</span>
				</h2>
				
				<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
					{proyectosOrdenados.map((proyecto, index) => (
						<article class={`card-hover bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden animate-fade-in-up`} style={`animation-delay: ${index * 0.1}s`}>
							<!-- Imagen compacta -->
							<div class="relative h-32 overflow-hidden">
								<img 
									src={proyecto.imagen} 
									alt={proyecto.altImagen}
									class="w-full h-full object-cover"
								/>
								<div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
								<div class="absolute bottom-2 left-2 right-2">
									<h3 class="text-white font-bold text-sm line-clamp-2">
										{proyecto.titulo}
									</h3>
								</div>
							</div>
							
							<!-- Contenido compacto -->
							<div class="p-4">
								<div class="flex flex-wrap gap-1 mb-3">
									{proyecto.etiquetas.slice(0, 2).map(etiqueta => (
										<span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded text-xs">
											{etiqueta}
										</span>
									))}
									{proyecto.etiquetas.length > 2 && (
										<span class="bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded text-xs">
											+{proyecto.etiquetas.length - 2}
										</span>
									)}
								</div>
								
								<p class="text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3">
									{proyecto.descripcion}
								</p>
								
								<!-- Informaci√≥n clave -->
								<div class="flex justify-between items-center mb-4 text-xs text-gray-500 dark:text-gray-400">
									<span>{proyecto.fechaInicio} - {proyecto.fechaFin}</span>
									<span class={`px-2 py-1 rounded-full ${proyecto.estado === 'En curso' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' : 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'}`}>
										{proyecto.estado}
									</span>
								</div>
								
								<!-- Bot√≥n de acci√≥n -->
								<a 
									href={proyecto.url} 
									class="w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white py-2 px-4 rounded-lg text-center text-sm font-medium transition-all duration-200 block"
								>
									Ver proyecto
								</a>
							</div>
						</article>
					))}
				</div>
			</section>

			<!-- Call to action -->
			<section class="mt-16 text-center animate-fade-in-up animate-delay-400">
				<div class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8 card-hover">
					<h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
						¬øInteresado en colaborar?
					</h3>
					<p class="text-gray-600 dark:text-gray-400 mb-6 max-w-2xl mx-auto">
						Si tienes ideas para proyectos innovadores o quieres formar parte de nuestro equipo de investigaci√≥n, 
						no dudes en ponerte en contacto conmigo.
					</p>
					<div class="flex flex-wrap justify-center gap-4">
						<a 
							href="/contacto" 
							class="btn-enhanced px-6 py-3 text-white font-medium rounded-lg transition-all duration-200"
						>
							üí¨ Contactar
						</a>
						<a 
							href="/publicaciones" 
							class="bg-white dark:bg-gray-800 border-2 border-blue-500 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-gray-700 px-6 py-3 font-medium rounded-lg transition-all duration-200"
						>
							üìö Ver Publicaciones
						</a>
					</div>
				</div>
			</section>
		</div>
	</main>
</Layout>
